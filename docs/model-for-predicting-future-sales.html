<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Model for predicting future sales | XAI Stories 2.0</title>
  <meta name="description" content="eXplainable Artificial Intelligence for Retail Analytics" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Model for predicting future sales | XAI Stories 2.0" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="/images/cover.png" />
  <meta property="og:description" content="eXplainable Artificial Intelligence for Retail Analytics" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Model for predicting future sales | XAI Stories 2.0" />
  
  <meta name="twitter:description" content="eXplainable Artificial Intelligence for Retail Analytics" />
  <meta name="twitter:image" content="/images/cover.png" />



<meta name="date" content="2021-06-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="the-most-seasonal-products.html"/>
<link rel="next" href="model-explanation.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>



<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><h3>XAI Stories 2.0</h3> Case studies for retail analytics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="foreword.html"><a href="foreword.html"><i class="fa fa-check"></i>Foreword</a>
<ul>
<li class="chapter" data-level="0.1" data-path="foreword.html"><a href="foreword.html#why"><i class="fa fa-check"></i><b>0.1</b> Why?</a></li>
<li class="chapter" data-level="0.2" data-path="foreword.html"><a href="foreword.html#what"><i class="fa fa-check"></i><b>0.2</b> What?</a></li>
<li class="chapter" data-level="0.3" data-path="foreword.html"><a href="foreword.html#how"><i class="fa fa-check"></i><b>0.3</b> How?</a></li>
<li class="chapter" data-level="0.4" data-path="foreword.html"><a href="foreword.html#about-academic-partners"><i class="fa fa-check"></i><b>0.4</b> About academic partners</a></li>
<li class="chapter" data-level="0.5" data-path="foreword.html"><a href="foreword.html#about-business-partner"><i class="fa fa-check"></i><b>0.5</b> About business partner</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="team-1.html"><a href="team-1.html"><i class="fa fa-check"></i><b>1</b> Team 1</a>
<ul>
<li class="chapter" data-level="1.1" data-path="team-1.html"><a href="team-1.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
<li class="chapter" data-level="1.2" data-path="team-1.html"><a href="team-1.html#model"><i class="fa fa-check"></i><b>1.2</b> Model</a></li>
<li class="chapter" data-level="1.3" data-path="team-1.html"><a href="team-1.html#explanations"><i class="fa fa-check"></i><b>1.3</b> Explanations</a></li>
<li class="chapter" data-level="1.4" data-path="team-1.html"><a href="team-1.html#summary-and-conclusions"><i class="fa fa-check"></i><b>1.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="team-2.html"><a href="team-2.html"><i class="fa fa-check"></i><b>2</b> Team 2</a></li>
<li class="chapter" data-level="3" data-path="introduction-1.html"><a href="introduction-1.html"><i class="fa fa-check"></i><b>3</b> Introduction</a></li>
<li class="chapter" data-level="4" data-path="the-most-seasonal-products.html"><a href="the-most-seasonal-products.html"><i class="fa fa-check"></i><b>4</b> The most seasonal products</a>
<ul>
<li class="chapter" data-level="4.0.1" data-path="the-most-seasonal-products.html"><a href="the-most-seasonal-products.html#data-representation"><i class="fa fa-check"></i><b>4.0.1</b> Data representation</a></li>
<li class="chapter" data-level="4.0.2" data-path="the-most-seasonal-products.html"><a href="the-most-seasonal-products.html#seasonality-measure"><i class="fa fa-check"></i><b>4.0.2</b> Seasonality measure</a></li>
<li class="chapter" data-level="4.0.3" data-path="the-most-seasonal-products.html"><a href="the-most-seasonal-products.html#what-kind-of-seasonality"><i class="fa fa-check"></i><b>4.0.3</b> What kind of seasonality?</a></li>
<li class="chapter" data-level="4.0.4" data-path="the-most-seasonal-products.html"><a href="the-most-seasonal-products.html#the-most-seasonal-products-1"><i class="fa fa-check"></i><b>4.0.4</b> The most seasonal products</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="model-for-predicting-future-sales.html"><a href="model-for-predicting-future-sales.html"><i class="fa fa-check"></i><b>5</b> Model for predicting future sales</a></li>
<li class="chapter" data-level="6" data-path="model-explanation.html"><a href="model-explanation.html"><i class="fa fa-check"></i><b>6</b> Model Explanation</a></li>
<li class="chapter" data-level="7" data-path="data-preprocessing.html"><a href="data-preprocessing.html"><i class="fa fa-check"></i><b>7</b> Data preprocessing</a></li>
<li class="chapter" data-level="8" data-path="team-3.html"><a href="team-3.html"><i class="fa fa-check"></i><b>8</b> Team 3</a>
<ul>
<li class="chapter" data-level="8.1" data-path="team-3.html"><a href="team-3.html#introduction-2"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="team-3.html"><a href="team-3.html#model-1"><i class="fa fa-check"></i><b>8.2</b> Model</a></li>
<li class="chapter" data-level="8.3" data-path="team-3.html"><a href="team-3.html#explanations-1"><i class="fa fa-check"></i><b>8.3</b> Explanations</a></li>
<li class="chapter" data-level="8.4" data-path="team-3.html"><a href="team-3.html#summary-and-conclusions-1"><i class="fa fa-check"></i><b>8.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="story-sales-prediction.html"><a href="story-sales-prediction.html"><i class="fa fa-check"></i><b>9</b> Story Sales Prediction</a>
<ul>
<li class="chapter" data-level="9.1" data-path="story-sales-prediction.html"><a href="story-sales-prediction.html#introduction-3"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="story-sales-prediction.html"><a href="story-sales-prediction.html#data"><i class="fa fa-check"></i><b>9.2</b> Data</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="story-sales-prediction.html"><a href="story-sales-prediction.html#overview"><i class="fa fa-check"></i><b>9.2.1</b> Overview</a></li>
<li class="chapter" data-level="9.2.2" data-path="story-sales-prediction.html"><a href="story-sales-prediction.html#assigning-missing-categories"><i class="fa fa-check"></i><b>9.2.2</b> Assigning missing categories</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="story-sales-prediction.html"><a href="story-sales-prediction.html#long-term-sales-forecasting"><i class="fa fa-check"></i><b>9.3</b> Long-term sales forecasting</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="story-sales-prediction.html"><a href="story-sales-prediction.html#model-description"><i class="fa fa-check"></i><b>9.3.1</b> Model description</a></li>
<li class="chapter" data-level="9.3.2" data-path="story-sales-prediction.html"><a href="story-sales-prediction.html#model-explanations"><i class="fa fa-check"></i><b>9.3.2</b> Model explanations</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="story-sales-prediction.html"><a href="story-sales-prediction.html#short-term-sales-forecasting"><i class="fa fa-check"></i><b>9.4</b> Short-term sales forecasting</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="story-sales-prediction.html"><a href="story-sales-prediction.html#models-description"><i class="fa fa-check"></i><b>9.4.1</b> Models’ description</a></li>
<li class="chapter" data-level="9.4.2" data-path="story-sales-prediction.html"><a href="story-sales-prediction.html#results"><i class="fa fa-check"></i><b>9.4.2</b> Results</a></li>
<li class="chapter" data-level="9.4.3" data-path="story-sales-prediction.html"><a href="story-sales-prediction.html#models-explanations"><i class="fa fa-check"></i><b>9.4.3</b> Models’ explanations</a></li>
<li class="chapter" data-level="9.4.4" data-path="story-sales-prediction.html"><a href="story-sales-prediction.html#why-dont-we-use-short-term-regression-model-instead"><i class="fa fa-check"></i><b>9.4.4</b> Why don’t we use short-term regression model instead</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="story-sales-prediction.html"><a href="story-sales-prediction.html#summary-and-conclusions-2"><i class="fa fa-check"></i><b>9.5</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="temperature-vs-sales-prediction.html"><a href="temperature-vs-sales-prediction.html"><i class="fa fa-check"></i><b>10</b> Temperature vs sales prediction</a>
<ul>
<li class="chapter" data-level="10.1" data-path="temperature-vs-sales-prediction.html"><a href="temperature-vs-sales-prediction.html#introduction-4"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="temperature-vs-sales-prediction.html"><a href="temperature-vs-sales-prediction.html#model-2"><i class="fa fa-check"></i><b>10.2</b> Model</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="temperature-vs-sales-prediction.html"><a href="temperature-vs-sales-prediction.html#product-categories"><i class="fa fa-check"></i><b>10.2.1</b> Product Categories</a></li>
<li class="chapter" data-level="10.2.2" data-path="temperature-vs-sales-prediction.html"><a href="temperature-vs-sales-prediction.html#training-and-testing-procedure"><i class="fa fa-check"></i><b>10.2.2</b> Training and testing procedure</a></li>
<li class="chapter" data-level="10.2.3" data-path="temperature-vs-sales-prediction.html"><a href="temperature-vs-sales-prediction.html#evaluated-models"><i class="fa fa-check"></i><b>10.2.3</b> Evaluated models</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="temperature-vs-sales-prediction.html"><a href="temperature-vs-sales-prediction.html#explanations-2"><i class="fa fa-check"></i><b>10.3</b> Explanations</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="temperature-vs-sales-prediction.html"><a href="temperature-vs-sales-prediction.html#instance-level-explanations-1"><i class="fa fa-check"></i><b>10.3.1</b> Instance-level explanations</a></li>
<li class="chapter" data-level="10.3.2" data-path="temperature-vs-sales-prediction.html"><a href="temperature-vs-sales-prediction.html#model-level-explanations"><i class="fa fa-check"></i><b>10.3.2</b> Model-level explanations</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="temperature-vs-sales-prediction.html"><a href="temperature-vs-sales-prediction.html#summary-and-conclusions-3"><i class="fa fa-check"></i><b>10.4</b> Summary and conclusions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="_blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">XAI Stories 2.0</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="model-for-predicting-future-sales" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> Model for predicting future sales</h1>
<p>For sales predicting we use Prophet, a tool developed by engineers from Facebook for time series forecasting. While it is a very powerful model there are no ready-to-go XAI techniques. We describe some of our proposals later.</p>
<p>We wondered what additional information could be useful in forecasting. We came up with this ideas:</p>
<ul>
<li><p>Google trends - one can use Google trends to get the popularity of any given query made in google browser. We thought that this might be potentially useful. Our guess was that seeing increase in popularity of some products in Google one should expect increase in sales of these products.</p></li>
<li><p>Temperature - mean temperature in Poland in a given month. Restricting our interest only to Poland’s temperatures is valid since we only use products sold in Poland anyway. The reason behind using it is that the most seasonal products have the peak in their sales in spring and summer, as we could see in the previous section. They are frequently associated with outdoor activities. So can rising temperatures anticipate the boom in tents or garden chairs sales?</p></li>
<li><p>New cases of coronavirus - new cases of coronavirus in a given month in Poland. The pandemic undisputably affected a lot of different areas in our life. But it may be especially related to our shoping activites. Firstly, because large number of covid cases has been forcing stationary shops to be closed. It is clearly visible in Shumee data that their fast growth is even greater after March 2020. But secondly there is also a chance that the pandemic changed what people find valuable to buy and what they want to buy.</p></li>
<li><p>Total number of all sells of all products in a given month.</p></li>
</ul>
<p>First of all it is worth taking a look at the correlation between the seasonal products and the proposed regressors. As an example we show correlation between sells of <em>markiza</em> and each individual reggresor:</p>
<p><img src="images/02_corr_markiza_trends.png" width="700" style="display: block; margin: auto;" /><img src="images/02_corr_markiza_temp.png" width="700" style="display: block; margin: auto;" /><img src="images/02_corr_markiza_covid.png" width="700" style="display: block; margin: auto;" /><img src="images/02_corr_markiza_whole_sells.png" width="700" style="display: block; margin: auto;" /></p>
<p>We can see that Shumee fastly grows. So we will predict sells of a given product devided by total number of sells in a given month. Because trend of Shumee sells depends on many things like:
business decisions, market competition and others. This is very difficult to predict by any artificial intelligence model, so we simplify our problem.</p>
<p>First problem which we met was: how to measure the model’s error? This problem appears because we build separate models for each product. We decided to split timeseries to train and test sets in a following way: train set contains data from 2018-02 to 2020-11 and test set contains 2020-12 to 2021-02. We train the FB Prophet model on the train dataset and we measure error on the test dataset using mean squared error metric.</p>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="the-most-seasonal-products.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="model-explanation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/pbiecek/xai_stories_2/edit/master/02-seasonality-analysis.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["book.pdf", "book.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
